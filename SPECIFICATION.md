# 15  パズル Web サービス **MVP 仕様書**

---

## 1. 目的

Next.js を用いたブラウザ向け 15  パズル（スライドパズル）の最小実装（MVP）を定義し、開発範囲を明確にする。

## 2. 範囲

本仕様書は MVP に必要な機能のみを対象とし、タイマー/スコアリング・自動ソルバ・テーマ変更等の拡張機能は **含まない**。

## 3. 機能要件

### 3.1 ゲームボード

- 4×4 グリッド（計 16  マス）。
- 数字タイル **1〜15** と空白 **0** を保持。
- 初期状態はランダムシャッフル。（※ solvable 生成は必須要件に含めない）

### 3.2 タイル移動

| 入力方法            | 動作                                                                                                         |
| ------------------- | ------------------------------------------------------------------------------------------------------------ |
| **マウス / タッチ** | 空白と上下左右に隣接するタイルをクリック／タップすると、そのタイルが空白位置へスライドし空白は元の位置へ移動 |
| **キーボード**      | ← ↑ → ↓ キーで空白セルを対応方向へ移動。移動不可の場合は無視                                                 |

### 3.3 勝利判定

- タイル並びが `1,2,3,…,15,0` となった時点でゲームクリア。
- クリア時は画面上部に **“Congratulations!”** トースト（アラート）を表示。

### 3.4 リセット

- **RESET** ボタン押下で新規シャッフルしてゲームを再開始。

## 4. UI / UX 要件

- **レスポンシブ**: モバイル（最小幅 320 px）〜 デスクトップで見やすいレイアウト。

  - ボードは正方形を維持し、画面の短辺にフィットさせる。

- **ビジュアル**: Tailwind CSS を使用し、シンプルな番号付きタイル（背景: `slate-200`, フォント: `font-bold text-xl`）。
- **アクセシビリティ**: ボタン要素に `aria-label`、キーボードフォーカスリングを付与。

## 5. 非機能要件

| 項目             | 内容                                      |
| ---------------- | ----------------------------------------- |
| パフォーマンス   | 操作後 **50 ms** 以内に描画更新           |
| ブラウザサポート | 最新 **Chrome / Firefox / Safari / Edge** |
| オフライン       | 不要                                      |
| 国際化           | 日本語固定で OK                           |

## 6. 技術要件

| レイヤー       | バージョン / ライブラリ                 |
| -------------- | --------------------------------------- |
| ランタイム     | Node.js **22 LTS**                      |
| フレームワーク | Next.js **15** (App Router)             |
| 言語           | TypeScript                              |
| スタイリング   | Tailwind CSS                            |
| 状態管理       | React **useState / useEffect** のみ     |
| デプロイ       | Vercel (静的エクスポート or Serverless) |

## 7. ディレクトリ構成（案）

```
/app
  page.tsx          # ルート・ゲーム画面
  layout.tsx
/components
  Board.tsx         # 16 マス描画
  Tile.tsx          # タイル 1 枚
  HUD.tsx           # RESET ボタン & クリアメッセージ
/lib
  usePuzzle.ts      # ゲームロジック Hook
/styles
  globals.css
```

## 8. 開発セットアップ

```bash
npx create-next-app@latest puzzle15 --typescript --tailwind --eslint --app
cd puzzle15
npm run dev
```

## 9. 受け入れ基準 (Acceptance Criteria)

| ID   | シナリオ                | 条件                             | 期待結果                                 |
| ---- | ----------------------- | -------------------------------- | ---------------------------------------- |
| FR-1 | タイルクリック          | 空白と隣接するタイルをクリック   | タイルが空白位置へ移動し、空白が元位置へ |
| FR-2 | タイルクリック (非隣接) | 空白と隣接しないタイルをクリック | 何も起きない                             |
| FR-3 | キーボード移動          | ←↑→↓ で空白を移動可能方向へ      | ボード状態が更新                         |
| FR-4 | クリア判定              | ボードが昇順整列                 | “Congratulations!” が表示される          |
| FR-5 | リセット                | RESET 押下                       | 新しいランダムボードに更新               |

## 10. 将来拡張 (参考)

- 解けるシャッフルアルゴリズム
- タイマー・移動回数・ランキング
- テーマスキン切替 / PWA 対応
